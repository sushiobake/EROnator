# FANZA審査までのチェックリスト

## 現在の状態

✅ **デプロイ完了**: Vercel + Supabaseにデプロイ済み
✅ **パフォーマンス最適化**: リージョン設定完了（nrt1）
✅ **審査用チェックリスト**: 17項目すべて実装済み（README.md参照）

## 審査前の最終確認項目

### 1. 動作確認（必須）

- [ ] デプロイされたサイトで全フローをテスト
  - [ ] AGE_GATE → AI_GATE → QUIZ → REVEAL → SUCCESS/FAIL_LIST
  - [ ] エラーが発生しないことを確認
  - [ ] パフォーマンスが許容範囲内（10秒以内）であることを確認

### 2. コンプライアンス確認（必須）

- [ ] **PR表記**: すべての外部リンクに「(PR)」が表示されている
- [ ] **リンク文言**: 「FANZAで見る」固定テンプレートが使用されている
- [ ] **サムネ画像**: 許可ホストのみ表示（現在は空リスト = 非表示）
- [ ] **AFFILIATE_ID**: 本番環境のみ設定（Vercelの環境変数で確認）

### 3. 環境変数の最終確認

Vercelの環境変数を確認：

- [ ] `DATABASE_URL`: 接続プーリングURL（ポート6543）が設定されている
- [ ] `DIRECT_URL`: 直接接続URL（ポート5432）が設定されている（オプション）
- [ ] `AFFILIATE_ID`: **本番用のアフィリエイトIDが設定されている**（重要！）
- [ ] `ERONATOR_DEBUG`: `0` に設定されている（本番ではデバッグ無効化）

**注意**: `NEXT_PUBLIC_AFFILIATE_ID`は`AFFILIATE_ID`から自動的に設定される想定ですが、必要に応じて手動で設定してください。

### 4. トップページの文言確認

- [ ] 年齢確認の文言が適切か
- [ ] 問い合わせフォームへのリンクが表示されている（`/contact`）

### 5. 問い合わせフォームの確認

- [ ] `/contact`ページが正常に表示される
- [ ] フォームが送信できる（現時点ではクライアント側のみ、後でAPI実装可能）

### 6. データの確認

- [ ] Supabaseに正しいデータが移行されている
- [ ] 作品データが正しく表示される
- [ ] タグデータが正しく機能している

## 審査提出前の最終チェック

### 提出前に確認すべき項目

1. **URLの確認**
   - [ ] デプロイされたURLが正しく動作している
   - [ ] HTTPSが有効になっている（Vercelは自動で有効化）

2. **パフォーマンス**
   - [ ] ページ読み込み時間が許容範囲内
   - [ ] API応答時間が許容範囲内（10秒以内）

3. **セキュリティ**
   - [ ] 環境変数が正しく設定されている
   - [ ] デバッグ機能が本番環境で無効化されている

4. **コンプライアンス**
   - [ ] すべての外部リンクにPR表記が表示されている
   - [ ] サムネ画像の表示が適切（許可ホストのみ）

## 審査提出後の対応

### 審査通過後

1. **独自ドメインの設定**（オプション）
   - VercelのSettings → Domainsでドメインを追加
   - DNS設定を実施
   - SSL証明書の自動発行を待つ

2. **本番運用の開始**
   - アフィリエイトIDの最終確認
   - モニタリングの設定（VercelのLogs、SupabaseのLogs）

### 審査で指摘があった場合

1. 指摘内容を確認
2. 必要に応じて修正
3. 再デプロイ
4. 再提出

## 参考資料

- **審査用チェックリスト**: `README.md`の「審査用チェックリスト」セクション
- **デプロイ手順**: `docs/github-vercel-deploy.md`
- **Supabaseセットアップ**: `docs/supabase-setup-ja.md`

## 次のステップ

1. ✅ デプロイ完了
2. ✅ パフォーマンス最適化完了
3. ⏳ **動作確認** ← 現在ここ
4. ⏳ **環境変数の最終確認** ← 現在ここ
5. ⏳ **審査提出**
6. ⏳ **審査通過待ち**
7. ⏳ **独自ドメイン設定**（オプション）
