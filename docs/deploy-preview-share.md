# 仮デプロイ（他人と共有できるURLを用意する）

**目的**: 本番ではなく、仮の状態でサーバーに上げて、**他人がアクセスできるURL** を用意する。

---

## 目的を果たすための手順

やることは次の **4つ** だけ。順番にやる。

---

### 手順1: 変更を Git に記録する（コミット）

- **やること**: いまの変更を「コミット」という形で記録する。
- **やり方**:  
  「変更をコミットして」と依頼すれば、こちらで実行する。  
  自分でやる場合: プロジェクトフォルダでターミナルを開き、次を実行する。
  ```bash
  git add .
  git commit -m "ここにメッセージ（例: 〇〇の変更）"
  ```

---

### 手順2: サーバー用の設定に切り替えて、それも記録する（prepare:push）

- **やること**: サーバー（Vercel）用の DB 設定（PostgreSQL）に切り替え、その変更もコミットする。
- **やり方**:  
  「Preview用にプッシュ準備して」と依頼すれば、こちらで **`npm run prepare:push`** を実行する。
- **注意**: このコマンドは「develop という枝」でないとエラーで止まる。  
  止まったら、先にターミナルで **`git checkout develop`** を実行してから、もう一度「Preview用にプッシュ準備して」と依頼する。

---

### 手順3: GitHub に送る（push）※ここだけあなたが実行

- **やること**: 手順1・2で記録した内容を GitHub に送る。送ると、Vercel が自動でビルドして **共有用のURL** を作る。
- **やり方**: プロジェクトフォルダでターミナルを開き、次を **あなたが** 実行する。
  ```bash
  git push origin develop
  ```
- GitHub の認証（パスワードやトークン）が求められたら、入力する。
- 終わったら、Vercel のダッシュボードで「develop 用の URL」を確認し、そのURLを他人に渡せば共有完了。

---

### 手順4: 手元のPCをまた「ローカル開発用」に戻す（restore:sqlite）

- **やること**: 手順2で「サーバー用」に切り替えた設定を、手元では「ローカル用」（SQLite）に戻す。戻さないと `npm run dev` が動かなくなる。
- **やり方**:  
  「ローカルをSQLiteに戻して」と依頼すれば、こちらで **`npm run restore:sqlite`** を実行する。  
  自分でやる場合: ターミナルで **`npm run restore:sqlite`** を実行する。

---

## まとめ（何をすれば目的が果たせるか）

| 順番 | やること | 誰がやる |
|------|----------|----------|
| 1 | 変更をコミット | 依頼すればこちら / または自分で `git add .` と `git commit -m "..."` |
| 2 | サーバー用に切り替え＋コミット（prepare:push） | 依頼すればこちらで `npm run prepare:push` |
| 3 | GitHub に送る（push） | **あなたが** ターミナルで `git push origin develop` |
| 4 | 手元をローカル用に戻す（restore:sqlite） | 依頼すればこちら / または自分で `npm run restore:sqlite` |

**あなたが必ず自分でやるのは「手順3: `git push origin develop`」だけ**（認証のため）。  
1・2・4 は「〇〇して」と依頼してもらえれば、こちらで実行する。

---

## 本番環境にデプロイする場合（参考）

他人と共有ではなく「本番」に反映したいときは、ターミナルで次を実行するだけ。

```bash
npm run deploy:prod
```

「本当に本番にデプロイしますか？ yes/no」と出たら **yes** と入力する。
