# 同人誌フィルタ分析

## 取得した5件の分析

### 1. 伽をせよ【Mac版】 (d_727173)
- **imageURL**: `digital/game/` → **ゲーム**
- **volume**: なし
- **genre**: シミュレーション、ドット制作、ツクール
- **判定**: ❌ **ゲーム → 除外**

### 2. ハメ撮りマジイキ黒ギャル 総集編 (d_727162)
- **imageURL**: `digital/comic/` → **コミック**
- **volume**: "835" → ページ数（数値のみ）
- **genre**: 学園もの、ギャル、NTRなど（同人誌のジャンル）
- **判定**: ✅ **同人誌 → 採用**

### 3. いっぱい出してね SRM娘8 (d_727148)
- **imageURL**: `digital/cg/` → **CG集**
- **volume**: "画像6枚+α" → 画像枚数
- **genre**: 巨乳、中出しなど
- **判定**: ❌ **CG集 → 除外**

### 4. 麻子のママ活記録-晒されたい男との密会-** (d_727140)
- **imageURL**: `digital/voice/` → **音声**
- **volume**: "1本 (約10分)" → 時間
- **genre**: 羞恥、熟女など
- **判定**: ❌ **音声 → 除外（同人誌ではない）**

### 5. マルタさんとボクシング、しよっ♪ side:L** (d_727106)
- **imageURL**: `digital/cg/` → **CG集**
- **volume**: "画像323枚" → 画像枚数
- **genre**: 巨乳、水着など
- **判定**: ❌ **CG集 → 除外**

## 判別基準の提案

### 方法1: imageURLパスで判別（推奨）

**同人誌の特徴**:
- `imageURL.list` または `imageURL.large` に `/digital/comic/` が含まれる

**除外対象**:
- `/digital/game/` → ゲーム
- `/digital/cg/` → CG集
- `/digital/voice/` → 音声
- その他（`/digital/`以外のパス）

**判定ロジック**:
```typescript
function isDoujinComic(item: Item): boolean {
  const imageUrl = item.imageURL?.list || item.imageURL?.large || '';
  return imageUrl.includes('/digital/comic/');
}
```

### 方法2: volumeフィールドで判別（補助的）

**同人誌の特徴**:
- `volume` が数値のみ（例: "835"）
- または数値+「ページ」などの文字列（例: "100ページ"）

**除外対象**:
- `volume` に「画像○枚」が含まれる → CG集
- `volume` に「本」「分」が含まれる → 音声/動画
- `volume` がない + ゲーム系ジャンル → ゲーム

### 方法3: ジャンルで判別（補助的）

**ゲーム系ジャンル**（除外）:
- シミュレーション (ID: 7110)
- ドット制作 (ID: 156002)
- ツクール (ID: 160045)
- その他ゲーム関連ジャンル

**CG集の特徴**（除外）:
- `volume` に「画像○枚」が含まれる
- `imageURL` に `/digital/cg/` が含まれる

## 推奨実装

**優先順位1: imageURLパス判定**
- 最も確実
- `/digital/comic/` のみを採用

**優先順位2: volumeフィールド補助判定**
- imageURLが不明確な場合の補助
- 「画像○枚」が含まれる場合は除外

**優先順位3: ジャンル補助判定**
- ゲーム系ジャンルが含まれる場合は除外

## 判定結果（5件）

- ✅ **採用**: 1件（ハメ撮りマジイキ黒ギャル 総集編）
- ❌ **除外**: 4件（ゲーム1件、CG集2件、音声1件）

## 結論

**判別は可能です。** `imageURL`パスに `/digital/comic/` が含まれるものを同人誌として判定できます。

ただし、より確実にするため、以下を組み合わせることを推奨します：
1. `imageURL` に `/digital/comic/` が含まれる
2. `volume` に「画像○枚」が含まれない（CG集除外）
3. ゲーム系ジャンルが含まれない（ゲーム除外）
